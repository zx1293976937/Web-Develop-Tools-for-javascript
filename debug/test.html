<!DOCTYPE html>
<html>
<head>
	<title>test</title>
	<meta charset="utf-8">
	<script type="text/javascript" src="milk.base-1.0.0.js"></script>
	<script type="text/javascript" src="milk.storage-1.0.0.js"></script>
	<script type="text/javascript" src="milk.console-1.0.0.js"></script>
	
	<script type="text/javascript" src="milk.controller-1.0.0.js"></script>
	<script type="text/javascript" src="milk.mouse-1.0.0.js"></script>
	
	<script type="text/javascript" src="milk.linker-1.0.0.js"></script>
	<!---->
	<script type="text/javascript">
		// milk.define("AClass", [], function() {
		// 	var self = milk.ObjectClass.call(this);

		// 	self.init = function() {
		// 		milk.Console.log(self.getIdentifier());
		// 		console.log(self.getIdentifier());
		// 		return self;
		// 	};

		// 	self.sayHello = function() {
		// 		milk.Console.log("Hello", null, "#FF0000");
		// 		console.log("Hello");
		// 	};

		// 	return self;
		// });

		// milk.define("BClass", ["AClass"], function(AClass) {
		// 	var self = AClass.call(this);

		// 	self.methodB = function() {
		// 		milk.Console.log("MethodB");
		// 		console.log("MethodB");
		// 	};

		// 	return self;
		// });

		// milk.define("CClass", ["BClass"], function(BClass) {
		// 	var self = BClass.call(this);

		// 	return self;
		// });

		// var c = milk.alloc("CClass").init();
		// c.sayHello();
		// c.methodB();

		// milk.dealloc(c);
	</script>
	<script type="text/javascript">
		// var array = ["A", "B", "C"];
		// var ac = milk.alloc("milk.collection.ArrayController").initWithArray(array);

		// milk.Console.log(ac.size());
		// //console.log(ac.size());

		// milk.dealloc(ac);
	</script>
	
	

</head>
<body>
	<div id="testArea" style="background: LightPink; width: 400px; height: 300px;">
		Hello World!
	</div>
	<script type="text/javascript">
		/*
		var mouse = $M.alloc("milk.util.Mouse").initWithPanel(document.getElementById("testArea"));
		mouse
			.onLeftToRight(function(p1, p2) {
				milk.Console.log("x: "+p2.x + ", y:"+p2.y);
			}).onRightToLeft(function(p1, p2) {
				milk.Console.log("x: "+p2.x + ", y:"+p2.y, null, "#FF0000");
			}).onTopToBottom(function(p1, p2) {
				milk.Console.log("x: "+p2.x + ", y:"+p2.y, null, "#00FF00");
			}).onBottomToTop(function(p1, p2) {
				milk.Console.log("x: "+p2.x + ", y:"+p2.y, null, "#0000FF");
			}).onMove(function(p1, p2) {
				milk.Console.log("(x: "+p1.x + ", y:"+p1.y+") to (" +"x: "+p2.x + ", y:"+p2.y+")");
			});
		*/
	</script>
	<script type="text/javascript">
		var dom = document.getElementById("testArea");

		/*
		var attr1 = $M.alloc("milk.linker.DOMAttribute").initWithDOMObject(dom, "innerHTML");
		attr1.setAttributeValue("Weller Qu");

		var attr2 = $M.alloc("milk.linker.DOMAttribute").initWithDOMObject(dom, "style.background");
		attr2.setAttributeValue("red");

		attr1.setAttributeValue(attr2.getAttributeValue());
		//*/

		/*
		var attr3 = $M.alloc("milk.linker.DOMAttribute").initWithDOMObject(dom, "items");
		var arr = ["AAA", "BBB", "CCC"];
		var creater = {
			build: function(context) {
				var view = document.createElement("div");
				view.innerHTML = context;
				return view;
			},
			Reverse: function(view) {
				return view.innerHTML;
			}
		};
		attr3.setCreater(creater);
		attr3.setAttributeValue(arr);

		var value = attr3.getAttributeValue();
		alert(value.join(','));
		//*/
		
		$M.define("milk.vm.Task", ["milk.linker.Entity"], function(Entity) {
			var self = Entity.call(this);

			var _taskName = null;

			self.setTaskName = function(t) {
				_taskName = t;
				self.onPropertyChanged("TaskName");
			};
			self.getTaskName = function() {
				return _taskName;
			};

			return self;
		});

		$M.define("milk.vm.Block", ["milk.linker.Entity"], function(Entity) {
			var self = Entity.call(this);

			var _task = null;

			self.setTask = function(t) {
				_task = t;
				self.onPropertyChanged("Task");
			};
			self.getTask = function() {
				return _task;
			};

			return self;
		});

		var task = $M.alloc("milk.vm.Task").init();

		var block = $M.alloc("milk.vm.Block").init();
		block.setTask(task);

		var attr4 = $M.alloc("milk.linker.DOMAttribute").initWithDOMObject(dom, "innerHTML");
		attr4.linkTo(block, "Task.TaskName");

		task.setTaskName("hahahahahaha");
	</script>
</body>
</html>